webpackJsonp([1,14],{478:function(t,e,n){function o(t){n(545)}var a=n(16)(n(547),n(548),o,"data-v-7da23f5c",null);t.exports=a.exports},488:function(t,e,n){function o(t){n(603)}var a=n(16)(n(605),n(606),o,"data-v-d29dab06",null);t.exports=a.exports},496:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.regex=e.ref=e.len=e.req=e.withParams=void 0;var o=n(500),a=function(t){return t&&t.__esModule?t:{default:t}}(o);e.withParams=a.default;var i=e.req=function(t){if(Array.isArray(t))return!!t.length;if(void 0===t||null===t||!1===t)return!1;if("object"==typeof t){for(var e in t)return!0;return!1}return!!String(t).length};e.len=function(t){return Array.isArray(t)?t.length:"object"==typeof t?Object.keys(t).length:String(t).length},e.ref=function(t,e,n){return"function"==typeof t?t.call(e,n):n[t]},e.regex=function(t,e){return(0,a.default)({type:t},function(t){return!i(t)||e.test(t)})}},497:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.and=e.or=e.url=e.sameAs=e.requiredUnless=e.requiredIf=e.required=e.minLength=e.maxLength=e.email=e.between=e.numeric=e.alphaNum=e.alpha=void 0;var a=n(499),i=o(a),r=n(501),c=o(r),s=n(502),u=o(s),l=n(503),d=o(l),f=n(504),m=o(f),v=n(505),p=o(v),g=n(506),h=o(g),b=n(507),y=o(b),_=n(508),x=o(_),w=n(509),q=o(w),C=n(510),P=o(C),$=n(511),S=o($),k=n(512),D=o(k),L=n(513),j=o(L);e.alpha=i.default,e.alphaNum=c.default,e.numeric=u.default,e.between=d.default,e.email=m.default,e.maxLength=p.default,e.minLength=h.default,e.required=y.default,e.requiredIf=x.default,e.requiredUnless=q.default,e.sameAs=P.default,e.url=S.default,e.or=D.default,e.and=j.default},498:function(t,e,n){var o=n(87),a=n(15)("toStringTag"),i="Arguments"==o(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=r(e=Object(t),a))?n:i?o(e):"Object"==(c=o(e))&&"function"==typeof e.callee?"Arguments":c}},499:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=(0,o.regex)("alpha",/^[a-zA-Z]*$/)},500:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(258).withParams;e.default=o},501:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=(0,o.regex)("alphaNum",/^[a-zA-Z0-9]*$/)},502:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=(0,o.regex)("numeric",/^[0-9]*$/)},503:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(t,e){return(0,o.withParams)({type:"between",min:t,max:e},function(n){return!(0,o.req)(n)||!/\s/.test(n)&&+t<=+n&&+e>=+n})}},504:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496),a=/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/;e.default=(0,o.regex)("email",a)},505:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(t){return(0,o.withParams)({type:"maxLength",max:t},function(e){return!(0,o.req)(e)||(0,o.len)(e)<=t})}},506:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(t){return(0,o.withParams)({type:"minLength",min:t},function(e){return!(0,o.req)(e)||(0,o.len)(e)>=t})}},507:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=(0,o.withParams)({type:"required"},o.req)},508:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(t){return(0,o.withParams)({type:"requiredIf",prop:t},function(e,n){return!(0,o.ref)(t,this,n)||(0,o.req)(e)})}},509:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(t){return(0,o.withParams)({type:"requiredUnless",prop:t},function(e,n){return!!(0,o.ref)(t,this,n)||(0,o.req)(e)})}},510:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(t){return(0,o.withParams)({type:"sameAs",eq:t},function(e,n){return e===(0,o.ref)(t,this,n)})}},511:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496),a=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/;e.default=(0,o.regex)("url",a)},512:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,o.withParams)({type:"or"},function(){for(var t=this,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.length>0&&e.reduce(function(e,n){return e||n.apply(t,o)},!1)})}},513:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(496);e.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,o.withParams)({type:"and"},function(){for(var t=this,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.length>0&&e.reduce(function(e,n){return e&&n.apply(t,o)},!0)})}},514:function(t,e,n){var o=n(32);t.exports=function(t,e,n,a){try{return a?e(o(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},515:function(t,e,n){var o=n(48),a=n(15)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[a]===t)}},516:function(t,e,n){var o=n(498),a=n(15)("iterator"),i=n(48);t.exports=n(47).getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[o(t)]}},517:function(t,e,n){var o=n(15)("iterator"),a=!1;try{var i=[7][o]();i.return=function(){a=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var i=[7],r=i[o]();r.next=function(){return{done:n=!0}},i[o]=function(){return r},t(i)}catch(t){}return n}},518:function(t,e,n){"use strict";function o(t){var e,n;this.promise=new t(function(t,o){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=o}),this.resolve=a(e),this.reject=a(n)}var a=n(255);t.exports.f=function(t){return new o(t)}},523:function(t,e,n){var o=n(253),a=n(514),i=n(515),r=n(32),c=n(256),s=n(516),u={},l={},e=t.exports=function(t,e,n,d,f){var m,v,p,g,h=f?function(){return t}:s(t),b=o(n,d,e?2:1),y=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(i(h)){for(m=c(t.length);m>y;y++)if((g=e?b(r(v=t[y])[0],v[1]):b(t[y]))===u||g===l)return g}else for(p=h.call(t);!(v=p.next()).done;)if((g=a(p,b,v.value,e))===u||g===l)return g};e.BREAK=u,e.RETURN=l},524:function(t,e,n){var o=n(32),a=n(255),i=n(15)("species");t.exports=function(t,e){var n,r=o(t).constructor;return void 0===r||void 0==(n=o(r)[i])?e:a(n)}},525:function(t,e,n){var o,a,i,r=n(253),c=n(539),s=n(263),u=n(89),l=n(9),d=l.process,f=l.setImmediate,m=l.clearImmediate,v=l.MessageChannel,p=l.Dispatch,g=0,h={},b=function(){var t=+this;if(h.hasOwnProperty(t)){var e=h[t];delete h[t],e()}},y=function(t){b.call(t.data)};f&&m||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return h[++g]=function(){c("function"==typeof t?t:Function(t),e)},o(g),g},m=function(t){delete h[t]},"process"==n(87)(d)?o=function(t){d.nextTick(r(b,t,1))}:p&&p.now?o=function(t){p.now(r(b,t,1))}:v?(a=new v,i=a.port2,a.port1.onmessage=y,o=r(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(o=function(t){l.postMessage(t+"","*")},l.addEventListener("message",y,!1)):o="onreadystatechange"in u("script")?function(t){s.appendChild(u("script")).onreadystatechange=function(){s.removeChild(this),b.call(t)}}:function(t){setTimeout(r(b,t,1),0)}),t.exports={set:f,clear:m}},526:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},527:function(t,e,n){var o=n(32),a=n(33),i=n(518);t.exports=function(t,e){if(o(t),a(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},528:function(t,e,n){t.exports={default:n(529),__esModule:!0}},529:function(t,e,n){var o=n(47),a=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},530:function(t,e){t.exports=function(t,e,n,o){if(!(t instanceof e)||void 0!==o&&o in t)throw TypeError(n+": incorrect invocation!");return t}},531:function(t,e,n){var o=n(18);t.exports=function(t,e,n){for(var a in e)n&&t[a]?t[a]=e[a]:o(t,a,e[a]);return t}},536:function(t,e,n){t.exports={default:n(537),__esModule:!0}},537:function(t,e,n){n(262),n(257),n(261),n(538),n(542),n(543),t.exports=n(47).Promise},538:function(t,e,n){"use strict";var o,a,i,r,c=n(50),s=n(9),u=n(253),l=n(498),d=n(86),f=n(33),m=n(255),v=n(530),p=n(523),g=n(524),h=n(525).set,b=n(540)(),y=n(518),_=n(526),x=n(527),w=s.TypeError,q=s.process,C=s.Promise,P="process"==l(q),$=function(){},S=a=y.f,k=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n(15)("species")]=function(t){t($,$)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then($)instanceof e}catch(t){}}(),D=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},L=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var o=t._v,a=1==t._s,i=0;n.length>i;)!function(e){var n,i,r=a?e.ok:e.fail,c=e.resolve,s=e.reject,u=e.domain;try{r?(a||(2==t._h&&O(t),t._h=1),!0===r?n=o:(u&&u.enter(),n=r(o),u&&u.exit()),n===e.promise?s(w("Promise-chain cycle")):(i=D(n))?i.call(n,c,s):c(n)):s(o)}catch(t){s(t)}}(n[i++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){h.call(s,function(){var e,n,o,a=t._v,i=M(t);if(i&&(e=_(function(){P?q.emit("unhandledRejection",a,t):(n=s.onunhandledrejection)?n({promise:t,reason:a}):(o=s.console)&&o.error&&o.error("Unhandled promise rejection",a)}),t._h=P||M(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},M=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,o=0;n.length>o;)if(e=n[o++],e.fail||!M(e.promise))return!1;return!0},O=function(t){h.call(s,function(){var e;P?q.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=D(t))?b(function(){var o={_w:n,_d:!1};try{e.call(t,u(I,o,1),u(R,o,1))}catch(t){R.call(o,t)}}):(n._v=t,n._s=1,L(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};k||(C=function(t){v(this,C,"Promise","_h"),m(t),o.call(this);try{t(u(I,this,1),u(R,this,1))}catch(t){R.call(this,t)}},o=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},o.prototype=n(531)(C.prototype,{then:function(t,e){var n=S(g(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=P?q.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new o;this.promise=t,this.resolve=u(I,t,1),this.reject=u(R,t,1)},y.f=S=function(t){return t===C||t===r?new i(t):a(t)}),d(d.G+d.W+d.F*!k,{Promise:C}),n(49)(C,"Promise"),n(541)("Promise"),r=n(47).Promise,d(d.S+d.F*!k,"Promise",{reject:function(t){var e=S(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(c||!k),"Promise",{resolve:function(t){return x(c&&this===r?C:this,t)}}),d(d.S+d.F*!(k&&n(517)(function(t){C.all(t).catch($)})),"Promise",{all:function(t){var e=this,n=S(e),o=n.resolve,a=n.reject,i=_(function(){var n=[],i=0,r=1;p(t,!1,function(t){var c=i++,s=!1;n.push(void 0),r++,e.resolve(t).then(function(t){s||(s=!0,n[c]=t,--r||o(n))},a)}),--r||o(n)});return i.e&&a(i.v),n.promise},race:function(t){var e=this,n=S(e),o=n.reject,a=_(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,o)})});return a.e&&o(a.v),n.promise}})},539:function(t,e){t.exports=function(t,e,n){var o=void 0===n;switch(e.length){case 0:return o?t():t.call(n);case 1:return o?t(e[0]):t.call(n,e[0]);case 2:return o?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},540:function(t,e,n){var o=n(9),a=n(525).set,i=o.MutationObserver||o.WebKitMutationObserver,r=o.process,c=o.Promise,s="process"==n(87)(r);t.exports=function(){var t,e,n,u=function(){var o,a;for(s&&(o=r.domain)&&o.exit();t;){a=t.fn,t=t.next;try{a()}catch(o){throw t?n():e=void 0,o}}e=void 0,o&&o.enter()};if(s)n=function(){r.nextTick(u)};else if(i){var l=!0,d=document.createTextNode("");new i(u).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}else if(c&&c.resolve){var f=c.resolve();n=function(){f.then(u)}}else n=function(){a.call(o,u)};return function(o){var a={fn:o,next:void 0};e&&(e.next=a),t||(t=a,n()),e=a}}},541:function(t,e,n){"use strict";var o=n(9),a=n(47),i=n(17),r=n(19),c=n(15)("species");t.exports=function(t){var e="function"==typeof a[t]?a[t]:o[t];r&&e&&!e[c]&&i.f(e,c,{configurable:!0,get:function(){return this}})}},542:function(t,e,n){"use strict";var o=n(86),a=n(47),i=n(9),r=n(524),c=n(527);o(o.P+o.R,"Promise",{finally:function(t){var e=r(this,a.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then(function(){return n})}:t,n?function(n){return c(e,t()).then(function(){throw n})}:t)}})},543:function(t,e,n){"use strict";var o=n(86),a=n(518),i=n(526);o(o.S,"Promise",{try:function(t){var e=a.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},544:function(t,e,n){"use strict";var o=n(34);e.a={createConnectionRequest:function(t){return o.a.http.post("connection/createconnectionrequest",t)},cancelConnectionRequest:function(t){return o.a.http.post("connection/cancelconnectionrequest",t)},approveConnectionRequest:function(t){return o.a.http.post("connection/approveconnectionrequest",t)},denyConnectionRequest:function(t){return o.a.http.post("connection/denyconnectionrequest",t)},removeConnection:function(t){return o.a.http.post("connection/removeconnection",t)},disconnectFromBeacon:function(t){return o.a.http.post("connection/disconnectfrombeacon",t)},createConnectionObject:function(t,e,n){return{userId:e._id,beaconId:t._id,beaconOwnerId:t.author._id,lat:t.position.lat,lng:t.position.lng,userLat:n.lat,userLng:n.lng,ownerName:t.author.fullName,name:e.fullName,gravatar:e.gravatar,user:e}}}},545:function(t,e,n){var o=n(546);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(476)("8e915d62",o,!0)},546:function(t,e,n){e=t.exports=n(475)(void 0),e.push([t.i,".connection-square[data-v-7da23f5c]{padding:1rem 1.5rem;color:#0c0c0c;transition:all .3s}.connection-square.map-modal[data-v-7da23f5c]{padding:0;font-size:.85rem}.connection-square[data-v-7da23f5c]:not(.map-modal){cursor:pointer}.connection-square[data-v-7da23f5c]:not(.map-modal):hover{background:#eee}.connection-square div.connection-name[data-v-7da23f5c]{text-overflow:ellipsis;max-width:100%;display:block;overflow:hidden}.connection-square span.connection-timestamp[data-v-7da23f5c]{color:#757575;font-size:90%;margin-top:.2rem}",""])},547:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ConnectionSquare",props:["connection","mapModal"]}},548:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.connection?n("div",{staticClass:"connection-square text-center",class:{"map-modal":t.mapModal}},[n("img",{staticClass:"circular profile",attrs:{src:t.connection.gravatar}}),t._v(" "),n("div",{staticClass:"connection-name"},[t._v(t._s(t.connection.name))]),t._v(" "),t.mapModal?t._e():n("span",{staticClass:"connection-timestamp"},[t._v(t._s(t._f("moment")(t.connection.created,"from","now")))])]):t._e()},staticRenderFns:[]}},567:function(t,e,n){"use strict";var o=n(34);e.a={getCurrentPosition:function(){return o.a.http.post("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyDB7lZd5FSWzgoGMMwnMEVmHPAUeor69MM")},getBeaconDistance:function(t){return o.a.http.post("location/getbeacondistance",t)},createBeaconDistanceObject:function(t,e){return{beaconLat:t.position.lat,beaconLng:t.position.lng,userLat:e.lat,userLng:e.lng}}}},568:function(t,e,n){"use strict";var o=n(34);e.a={lightBeacon:function(t){return o.a.http.post("beacon/lightbeacon",t)},extinguishBeacon:function(t){return o.a.http.post("beacon/extinguishbeacon",t)},getNearbyBeacons:function(t){return o.a.http.post("beacon/getnearbybeacons",t)},verifyBeaconPassword:function(t){return o.a.http.post("beacon/verifybeaconpassword",t)}}},603:function(t,e,n){var o=n(604);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(476)("e55b0bb2",o,!0)},604:function(t,e,n){e=t.exports=n(475)(void 0),e.push([t.i,".beacon-card .beacon-card-title[data-v-d29dab06]{color:#fff}.beacon-card form[data-v-d29dab06]{padding:0 1rem 1.5rem}.beacon-card .connection-body[data-v-d29dab06]{padding:1rem}.beacon-card .connection-text[data-v-d29dab06]{padding:1rem 0}.beacon-card.connection-card[data-v-d29dab06]{margin-top:3rem}.beacon-card.connection-card .no-connections[data-v-d29dab06]{color:#0c0c0c;padding:1rem}.toggle-field[data-v-d29dab06]{padding-top:2rem;padding-bottom:1rem}.additional-settings-wrapper[data-v-d29dab06]{padding-top:1rem}.q-toggle[data-v-d29dab06]{-webkit-transform:scale(3);transform:scale(3)}.additional-settings-modal .modal-body[data-v-d29dab06]{overflow-x:hidden}.additional-settings-modal .q-slider[data-v-d29dab06]{max-width:98%}",""])},605:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(536),a=n.n(o),i=n(528),r=n.n(i),c=n(46),s=n(497),u=(n.n(s),n(567)),l=n(544),d=n(568),f=n(254),m=n(259),v=n(478),p=n.n(v);e.default={name:"Beacon",mixins:[f.a,m.a],components:{QBtn:c.d,QCard:c.e,QCardTitle:c.h,QField:c.n,QInput:c.q,QModal:c.z,QModalLayout:c.A,QRadio:c.C,QRange:c.D,QToggle:c.N,QToolbar:c.O,QChipsInput:c.k,QInnerLoading:c.p,QSpinnerGears:c.J,QSpinner:c.I,QSearch:c.F,QPagination:c.B,ConnectionSquare:p.a},data:function(){return{formData:{name:"",description:"",color:this.$store.state.user.settings.defaultColor||"#FF0000",beaconLit:this.doesObjectExist(this.$store.state.user.beacon),location:{type:"Point",coordinates:[]},author:this.$store.state.user._id,userId:this.$store.state.user._id,additionalSettings:null},additionalSettings:this.$store.state.user.beacon&&this.$store.state.user.beacon.additionalSettings||{beaconPassword:null,ageRange:{min:18,max:100},genderRestriction:null,tags:[]},connectedBeacon:null,search:"",page:1,limit:12,minPages:1,loading:!1}},computed:{user:function(){return!!this.$store.state.user&&this.$store.state.user},connections:function(){return this.checkExistence(this.$store.state.user,["beacon","connections"])?this.$store.state.user.beacon.connections:[]},filteredConnections:function(){var t=this;return this.connections.filter(function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())})},skip:function(){return this.page*this.limit-this.limit},maxPages:function(){return Math.ceil(this.filteredConnections.length/this.limit)}},validations:{formData:{name:{required:s.required,maxLength:Object(s.maxLength)(100)},description:{required:s.required,maxLength:Object(s.maxLength)(140)}},additionalSettings:{beaconPassword:{minLength:Object(s.minLength)(8)},tags:{maxLength:Object(s.maxLength)(5),$each:{maxLength:Object(s.maxLength)(20)}}}},methods:{getSlice:function(t){return 1===this.page?t.slice(0,10):t.slice(this.skip,this.skip+this.limit)},openRemoveConnectionDialog:function(t){var e=this;c.c.create({title:"Disconnect "+t.name+" from your beacon?",buttons:["Cancel",{label:"Confirm",handler:function(){e.loading=!0,l.a.removeConnection(t).then(function(n){e.loading=!1,e.$store.commit("updateBeacon",n.body);var o={toId:t.userId,toName:t.name,fromId:t.beaconOwnerId,fromName:t.ownerName};e.$socket.emit("removeConnection",o)}).catch(function(t){e.loading=!1,e.createToast("negative",t.body.message)})}}]})},disconnectFromBeacon:function(t){var e=this;this.loading=!0,l.a.disconnectFromBeacon(t).then(function(n){e.loading=!1,e.$store.commit("updateUser",n.body);var o={toId:t.beaconOwnerId,fromId:t.userId,fromName:t.name};e.$socket.emit("disconnectFromBeacon",o)}).catch(function(t){e.loading=!1,e.createToast("negative",t.body.message)})},toggleBeacon:function(){var t=this;if(this.loading=!0,this.formData.beaconLit)this.$store.state.user.settings.playBeaconSound&&document.getElementById("horn").play(),d.a.lightBeacon(this.formData).then(function(e){t.loading=!1,t.$store.commit("updateUser",e.body),t.$store.commit("updateBeacon",e.body.beacon)}).catch(function(e){t.beaconLit=!t.beaconLit,t.loading=!1,t.createToast("negative",e.body.message)});else{var e=JSON.parse(r()(this.$store.state.user.beacon)),n={beaconId:e._id,userId:e.author};d.a.extinguishBeacon(n).then(function(n){t.loading=!1,t.$store.commit("extinguishBeacon"),t.$store.commit("updateUser",n.body);var o={toIds:e.connections.map(function(t){return t.userId}),fromId:e.author,fromName:t.$store.state.user.fullName};t.$socket.emit("extinguishBeacon",o)}).catch(function(e){t.beaconLit=!t.beaconLit,t.loading=!1,t.createToast("negative",e.body.message)})}},updateAdditionalSettings:function(){this.formData.additionalSettings=this.additionalSettings},checkTagErrors:function(){if(this.$v.additionalSettings.tags.$dirty&&this.$v.additionalSettings.tags.$invalid)return!0;for(var t=0;t<5;t++)if(this.$v.additionalSettings.tags.$each[t]&&this.$v.additionalSettings.tags.$each[t].$invalid)return!0;return!1},cancelConnectionRequest:function(t){var e=this;l.a.cancelConnectionRequest(t).then(function(n){e.$store.commit("updateUser",n.body);var o={toId:t.beaconOwnerId,fromId:t.userId,fromName:t.name};e.$socket.emit("cancelConnectionRequest",o)}).catch(function(t){e.createToast("negative",t.body.message)})},getCurrentLocation:function(){return new a.a(function(t,e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t({body:{accuracy:e.coords.accuracy,location:{lat:e.coords.latitude,lng:e.coords.longitude}}})},function(n){var o="";o=1===n.code?"It is HIGHLY recommended to allow your browser to access geolocation. If you choose not to allow access, your location will be far less accurate. Access to geolocation can be changed at any time in your browser settings.":"We were unable to get your location through geolocation. Your location will be less accurate because of this.",c.c.create({title:"Warning",message:o,buttons:[{label:"Confirm",handler:function(){u.a.getCurrentPosition().then(function(e){t(e)}).catch(function(t){e(t)})}}]})},{enableHighAccuracy:!0}):u.a.getCurrentPosition().then(function(e){t(e)}).catch(function(t){e(t)})})}},mounted:function(){var t=this;this.doesObjectExist(this.$store.state.user.beacon)&&(this.formData=this.$store.state.user.beacon,this.formData.beaconLit=!0),this.getCurrentLocation().then(function(e){t.formData.location.coordinates[0]=e.body.location.lng,t.formData.location.coordinates[1]=e.body.location.lat}).catch(function(t){this.createToast("negative",t.body.message)})}}},606:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-padding row justify-center"},[n("div",{staticClass:"postlogin-page-wrapper"},[t.checkExistence(t.user,["outgoingConnectionRequest"],!0)&&t.checkExistence(t.user,["connectedTo"],!0)?n("q-card",{staticClass:"beacon-card",attrs:{color:"white"}},[n("q-card-title",{staticClass:"uppercase beacon-card-title text-center block bg-primary"},[t._v("\n        "+t._s(t.formData.beaconLit?"Extinguish":"Light")+" Beacon\n      ")]),t._v(" "),n("form",{staticClass:"relative-position",attrs:{name:"beaconForm"},on:{submit:function(t){t.preventDefault()}}},[n("q-field",{attrs:{error:t.$v.formData.name.$dirty&&t.$v.formData.name.$invalid,"error-label":"Please enter a name for your beacon"}},[n("q-input",{attrs:{type:"text","max-length":"100","float-label":"Name",disable:t.formData.beaconLit},on:{blur:function(e){t.$v.formData.name.$touch()}},model:{value:t.formData.name,callback:function(e){t.formData.name="string"==typeof e?e.trim():e},expression:"formData.name"}})],1),t._v(" "),n("q-field",{attrs:{error:t.$v.formData.description.$dirty&&t.$v.formData.description.$invalid,"error-label":"Please enter a description for your beacon with a maximum length of 140 characters"}},[n("q-input",{attrs:{type:"textarea","float-label":"Description",disable:t.formData.beaconLit,"max-length":"140","max-height":100,"min-rows":4},on:{blur:function(e){t.$v.formData.description.$touch()}},model:{value:t.formData.description,callback:function(e){t.formData.description="string"==typeof e?e.trim():e},expression:"formData.description"}})],1),t._v(" "),n("q-field",{attrs:{label:"Color ("+t.formData.color.toUpperCase()+")",labelWidth:11}}),t._v(" "),n("div",{staticClass:"colorpicker-block",class:{disabled:t.formData.beaconLit}},[n("div",{staticClass:"colorpicker-wrapper relative-position",style:{background:t.formData.color+" !important"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.color,expression:"formData.color"}],staticClass:"full-width colorpicker",attrs:{type:"color",disabled:t.formData.beaconLit},domProps:{value:t.formData.color},on:{input:function(e){e.target.composing||(t.formData.color=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"additional-settings-wrapper text-center"},[n("a",{on:{click:function(e){e.preventDefault(),t.$refs.additionalSettingsModal.open()}}},[t._v("Additional settings")])]),t._v(" "),n("q-field",{staticClass:"text-center toggle-field"},[n("q-toggle",{attrs:{disable:t.$v.formData.$invalid},on:{change:t.toggleBeacon},model:{value:t.formData.beaconLit,callback:function(e){t.formData.beaconLit=e},expression:"formData.beaconLit"}})],1),t._v(" "),n("q-inner-loading",{attrs:{visible:t.loading}},[n("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)],1):t._e(),t._v(" "),t.checkExistence(t.user,["outgoingConnectionRequest"])&&t.checkExistence(t.user,["beacon"],!0)?n("q-card",{staticClass:"beacon-card"},[n("q-card-title",{staticClass:"uppercase beacon-card-title text-center block bg-primary"},[t._v("\n        Awaiting Connection Approval\n      ")]),t._v(" "),n("div",{staticClass:"connection-body text-center"},[n("div",[n("q-spinner",{attrs:{color:"primary",size:50}})],1),t._v(" "),n("div",{staticClass:"connection-text"},[t._v("\n          You are currently waiting to be approved by "+t._s(t.$store.state.user.outgoingConnectionRequest.ownerName)+"\n        ")]),t._v(" "),n("q-btn",{attrs:{color:"primary"},on:{click:function(e){e.preventDefault(),t.cancelConnectionRequest(t.$store.state.user.outgoingConnectionRequest)}}},[t._v("Cancel connection request")])],1)],1):t._e(),t._v(" "),t.checkExistence(t.user,["outgoingConnectionRequest"],!0)&&t.checkExistence(t.user,["connectedTo"])&&t.checkExistence(t.user,["beacon"],!0)?n("q-card",{staticClass:"beacon-card"},[n("q-card-title",{staticClass:"uppercase beacon-card-title text-center block bg-primary"},[t._v("\n        Connected!\n      ")]),t._v(" "),n("div",{staticClass:"connection-body text-center"},[n("div",{staticClass:"connection-text"},[t._v("\n          You are connected to "+t._s(t.generatePossessive(t.$store.state.user.connectedTo.ownerName))+" beacon\n        ")]),t._v(" "),n("q-btn",{attrs:{color:"primary"},on:{click:function(e){e.preventDefault(),t.disconnectFromBeacon(t.$store.state.user.connectedTo)}}},[t._v("Disconnect")])],1)],1):t._e(),t._v(" "),t.checkExistence(t.user,["beacon"])?n("q-card",{staticClass:"beacon-card connection-card relative-position",attrs:{color:"white"}},[n("q-card-title",{staticClass:"uppercase beacon-card-title text-center block bg-primary"},[t._v("\n        Connections\n      ")]),t._v(" "),t.checkExistence(t.user,["beacon","connections"])?n("q-search",{staticClass:"no-margin",attrs:{color:"primary",inverted:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t._v(" "),t.checkExistence(t.user,["beacon","connections"])?n("div",{staticClass:"row"},t._l(t.getSlice(t.filteredConnections),function(e){return n("connection-square",{key:"connection.userId",staticClass:"col col-lg-4 col-sm-6 col-xs-12",attrs:{connection:e},nativeOn:{click:function(n){t.openRemoveConnectionDialog(e)}}})})):t._e(),t._v(" "),t.checkExistence(t.user,["beacon","connections"])?n("div",{staticClass:"text-center"},[n("q-pagination",{attrs:{min:t.minPages,max:t.maxPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e(),t._v(" "),t.checkExistence(t.user,["beacon","connections"],!0)?n("div",{staticClass:"text-center no-connections"},[t._v("\n        You have no connections at this time\n      ")]):t._e(),t._v(" "),n("q-inner-loading",{attrs:{visible:t.loading}},[n("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1):t._e(),t._v(" "),n("q-modal",{ref:"additionalSettingsModal",staticClass:"footer-no-shadow additional-settings-modal mobile-modal-padding",attrs:{"content-css":{minWidth:"400px",minHeight:"500px"}}},[n("q-modal-layout",{staticClass:"additionalSettingsModal"},[n("q-toolbar",{slot:"header"},[n("div",{staticClass:"q-toolbar-title"},[t._v("\n            Additional Settings\n          ")])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("form",{attrs:{name:"additionalSettingsForm"}},[n("q-field",{attrs:{label:"Appear to",labelWidth:11}}),t._v(" "),n("q-radio",{attrs:{val:null,label:"Everyone",disable:t.formData.beaconLit},model:{value:t.additionalSettings.genderRestriction,callback:function(e){t.additionalSettings.genderRestriction=e},expression:"additionalSettings.genderRestriction"}}),n("br"),t._v(" "),n("q-radio",{attrs:{val:"maleOnly",label:"Males only",disable:t.formData.beaconLit},model:{value:t.additionalSettings.genderRestriction,callback:function(e){t.additionalSettings.genderRestriction=e},expression:"additionalSettings.genderRestriction"}}),n("br"),t._v(" "),n("q-radio",{attrs:{val:"femaleOnly",label:"Females only",disable:t.formData.beaconLit},model:{value:t.additionalSettings.genderRestriction,callback:function(e){t.additionalSettings.genderRestriction=e},expression:"additionalSettings.genderRestriction"}}),t._v(" "),n("q-field",{attrs:{label:"Age Range ("+t.additionalSettings.ageRange.min+" to "+t.additionalSettings.ageRange.max+")",labelWidth:11}}),t._v(" "),n("q-range",{attrs:{min:18,max:100,label:"",disable:t.formData.beaconLit},model:{value:t.additionalSettings.ageRange,callback:function(e){t.additionalSettings.ageRange=e},expression:"additionalSettings.ageRange"}}),t._v(" "),n("q-field",{attrs:{error:t.$v.additionalSettings.beaconPassword.$dirty&&t.$v.additionalSettings.beaconPassword.$invalid,"error-label":"Password must be at least 8 characters long"}},[n("q-input",{attrs:{type:"password","float-label":"Connection password",disable:t.formData.beaconLit},on:{blur:function(e){t.$v.additionalSettings.beaconPassword.$touch()}},model:{value:t.additionalSettings.beaconPassword,callback:function(e){t.additionalSettings.beaconPassword="string"==typeof e?e.trim():e},expression:"additionalSettings.beaconPassword"}})],1),t._v(" "),n("q-field",{attrs:{error:t.checkTagErrors(),"error-label":"There is a maximum of 5 tags consisting of 20 characters each"}},[n("q-chips-input",{attrs:{disable:t.formData.beaconLit,"float-label":"Enter up to 5 tags"},model:{value:t.additionalSettings.tags,callback:function(e){t.additionalSettings.tags=e},expression:"additionalSettings.tags"}})],1)],1)]),t._v(" "),n("q-toolbar",{attrs:{color:"white"},slot:"footer"},[n("div",{staticClass:"q-toolbar-title text-right"},[n("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.additionalSettingsModal.close()}}},[t._v("Close")]),t._v(" "),n("q-btn",{attrs:{color:"primary",disable:t.$v.additionalSettings.$invalid||t.formData.beaconLit},on:{click:function(e){t.updateAdditionalSettings(),t.$refs.additionalSettingsModal.close()}}},[t._v("Update Settings")])],1)])],1)],1)],1)])},staticRenderFns:[]}}});