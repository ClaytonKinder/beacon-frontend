webpackJsonp([12],{491:function(t,a,e){function o(t){e(615)}var r=e(16)(e(617),e(618),o,null,null);t.exports=r.exports},528:function(t,a,e){t.exports={default:e(529),__esModule:!0}},529:function(t,a,e){var o=e(47),r=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},566:function(t,a,e){"use strict";var o=e(34);a.a={getUserByEmail:function(t){return o.a.http.get("user/getuser/"+t)},updateUserSettings:function(t){return o.a.http.post("user/updateusersettings",t)},updateUserInformation:function(t){return o.a.http.post("user/updateuserinformation",t)},updateUserEmail:function(t){return o.a.http.post("user/updateuseremail",t)},updateUserPassword:function(t){return o.a.http.post("user/updateuserpassword",t)}}},615:function(t,a,e){var o=e(616);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(476)("798292d6",o,!0)},616:function(t,a,e){a=t.exports=e(475)(void 0),a.push([t.i,".settings-card form{padding:0 1rem 1.5rem}.settings-card form .q-field-label-inner{width:100%!important}.settings-card form .q-radio:not(:last-of-type){margin-bottom:.25rem}.settings-card form .q-option .q-option-label{color:rgba(0,0,0,.54)}.settings-card form .button-wrapper{margin-top:1rem}",""])},617:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e(528),r=e.n(o),i=e(46),n=e(566),s=e(254);a.default={name:"Settings",mixins:[s.a],components:{QBtn:i.d,QCard:i.e,QCardTitle:i.h,QField:i.n,QInput:i.q,QToggle:i.N,QSlider:i.H,QRadio:i.C,QInnerLoading:i.p,QSpinnerGears:i.J},data:function(){return{formData:this.$store.state.user.settings||{beaconLimit:55,defaultColor:"#FF0000",playBeaconSound:!1,playNotificationSound:!0,unitOfMeasurement:"miles",searchRadius:15},originalData:null,loading:!1}},methods:{updateUserSettings:function(){var t=this;this.loading=!0;var a={userId:this.$store.state.user._id,settings:this.formData};n.a.updateUserSettings(a).then(function(a){t.loading=!1,t.$store.commit("updateUser",a.body),t.originalData=JSON.parse(r()(t.formData)),t.createToast("positive","Your settings were successfully updated")}).catch(function(a){t.loading=!1,t.createToast("negative",a.body.message)})},areObjectsEqual:function(t,a){return r()(t)===r()(a)}},mounted:function(){var t=this;this.$q.events.$on("changeColorSettings",function(a){t.formData.defaultColor=a}),this.$q.events.$once("changeColorSettings",function(a){t.originalData.defaultColor=a}),this.originalData=JSON.parse(r()(this.formData))}}},618:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"layout-padding row justify-center"},[e("div",{staticClass:"postlogin-page-wrapper"},[e("q-card",{staticClass:"settings-card relative-position",attrs:{color:"white"}},[e("q-card-title",{staticClass:"uppercase color-white text-center block bg-primary"},[t._v("\n        Update Settings\n      ")]),t._v(" "),e("form",{staticClass:"relative-position",attrs:{name:"beaconForm"},on:{submit:function(a){a.preventDefault(),t.updateUserSettings(a)}}},[e("q-field",{attrs:{label:"Play sound when lighting a beacon",labelWidth:11}},[e("q-toggle",{model:{value:t.formData.playBeaconSound,callback:function(a){t.formData.playBeaconSound=a},expression:"formData.playBeaconSound"}})],1),t._v(" "),e("q-field",{attrs:{label:"Play sound when receiving a connection request",labelWidth:11}},[e("q-toggle",{model:{value:t.formData.playNotificationSound,callback:function(a){t.formData.playNotificationSound=a},expression:"formData.playNotificationSound"}})],1),t._v(" "),e("q-field",{attrs:{label:"Unit of measurement",labelWidth:11}}),t._v(" "),e("q-radio",{attrs:{val:"miles",label:"Miles"},model:{value:t.formData.unitOfMeasurement,callback:function(a){t.formData.unitOfMeasurement=a},expression:"formData.unitOfMeasurement"}}),e("br"),t._v(" "),e("q-radio",{attrs:{val:"kilometers",label:"Kilometers"},model:{value:t.formData.unitOfMeasurement,callback:function(a){t.formData.unitOfMeasurement=a},expression:"formData.unitOfMeasurement"}}),t._v(" "),e("q-field",{attrs:{label:"Search radius",labelWidth:11}}),t._v(" "),e("q-slider",{attrs:{min:1,max:30,label:!0},model:{value:t.formData.searchRadius,callback:function(a){t.formData.searchRadius=a},expression:"formData.searchRadius"}}),t._v(" "),e("q-field",{attrs:{label:"Nearby beacon limit",labelWidth:11}}),t._v(" "),e("q-slider",{attrs:{min:1,max:100,label:!0},model:{value:t.formData.beaconLimit,callback:function(a){t.formData.beaconLimit=a},expression:"formData.beaconLimit"}}),t._v(" "),e("q-field",{attrs:{label:"Default beacon color ("+t.formData.defaultColor.toUpperCase()+")",labelWidth:11}}),t._v(" "),e("div",{staticClass:"colorpicker-block"},[e("div",{staticClass:"colorpicker-wrapper relative-position",style:{background:t.formData.defaultColor+" !important"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.defaultColor,expression:"formData.defaultColor"}],staticClass:"full-width colorpicker",attrs:{type:"color"},domProps:{value:t.formData.defaultColor},on:{input:function(a){a.target.composing||(t.formData.defaultColor=a.target.value)}}})])]),t._v(" "),e("div",{staticClass:" button-wrapper text-right"},[e("q-btn",{attrs:{color:"primary",disabled:t.areObjectsEqual(t.originalData,t.formData)}},[t._v("\n            Update\n          ")])],1)],1),t._v(" "),e("q-inner-loading",{attrs:{visible:t.loading}},[e("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)],1)])},staticRenderFns:[]}}});